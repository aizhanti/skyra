(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],[,,,,function(e,t,n){e.exports=n.p+"static/media/icon.d8a449e3.png"},function(e,t,n){e.exports=n.p+"static/media/phone_image.0603363a.png"},function(e,t,n){e.exports=n(14)},,,,,function(e,t,n){},function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(3),i=n.n(l),r=(n(11),n(1)),c=(n(12),n(13),n(4)),s=n.n(c),d=n(5),u=n.n(d);var f=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],l=t[1],i=Object(a.useState)(!1),c=Object(r.a)(i,2),d=c[0],f=c[1],m=Object(a.useRef)(),g=Object(a.useRef)();function E(){window.liff.isLoggedIn()&&window.liff.getProfile().then((function(e){var t=e.displayName;f(window.liff.isLoggedIn()),l(e.userId),console.log("app.js profile name, userid line103 ========>",t,n)})).catch((function(e){console.log("error",e)}))}function h(){return d?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"buttonRow"},o.a.createElement("button",{id:"sendMessageButton",className:"liffLoginButton",onClick:function(){return E(),void fetch("/news?userId=".concat(n)).then((function(e){return console.log("THIS IS A RESPONSE FOR news !!------\x3e",e)}))}},"Get News"),o.a.createElement("button",{id:"scanQrCodeButton",className:"liffLoginButton",onClick:function(){return E(),console.log("inside CovidStatus",n),void fetch("/covid?userId=".concat(n)).then((function(e){return console.log("THIS IS A RESPONSE FOR COVID!!------\x3e",e)}))}},"Get COVID Status"),o.a.createElement("button",{id:"sendMessageButton",className:"liffLoginButton",onClick:function(){return E(),console.log("***inside sendWeather****",n),void fetch("/weather?userId=".concat(n)).then((function(e){return console.log("THIS IS A RESPONSE FOR weather !!------\x3e",e)}))}},"Get Weather"),o.a.createElement("button",{id:"sendMessageButton",className:"liffLoginButton",onClick:function(){return E(),console.log("***inside sendFortune ****",n),void fetch("/fortune?userId=".concat(n)).then((function(e){return console.log("THIS IS A RESPONSE FOR fortune !!------\x3e",e)}))}},"Get Your Fortune"),o.a.createElement("button",{id:"sendMessageButton",className:"liffLoginButton",onClick:function(){return E(),console.log("inside sendJoke",n),void fetch("/joke?userId=".concat(n)).then((function(e){return console.log("THIS IS A RESPONSE FOR JOKES!!------\x3e",JSON.stringify(e.data))}))}},"Get Joke"))):o.a.createElement("h1",null)}return Object(a.useEffect)((function(){fetch("/send-id").then((function(e){return console.log("reqResponse",e.body),e.json()})).then((function(e){console.log("jsonresponseeee",e),function(e){e&&function(e){console.log("myLIffid---------\x3e",e),console.log("Is user logged in????",window.liff.isLoggedIn),window.liff.init({liffId:e}).then((function(){window.liff.isLoggedIn();var e=window.liff.getDecodedIDToken();console.log("app.js line68 initializeLiff -> idToken*****",e)})).catch((function(e){console.log(e)}))}(e)}(e.id)})).catch((function(e){console.log(e)})),setTimeout((function(){window.liff.isLoggedIn()&&(E(),E())}),2500)}),[]),Object(a.useEffect)((function(){d&&(m.current.style.display="none",g.current.innerText="Welcome to SKYRA!")}),[d]),window.setInterval((function(){var e=new Date;0===e.getSeconds()&&(console.log("now is",e),E(),fetch("/send-messages?userId=".concat(n)).then((function(e){return console.log("THIS IS A RESPONSE FOR MESSAGES!!------\x3e",e)})))}),1e3),o.a.createElement("div",{className:"App"},o.a.createElement("div",{id:"liffAppContent"},o.a.createElement("div",{className:"intro-section"},o.a.createElement("div",{className:"title-wrapper"},o.a.createElement("p",{id:"title"},"SKYRA")),o.a.createElement("img",{id:"icon",src:s.a}),o.a.createElement("p",{className:"marketInfo"},"Subscribe to SKYRA to get COVID-19 stats, Dad Jokes, Fortunes and more delivered to your LINE daily."),o.a.createElement("p",{ref:g,className:"marketInfo"},"Start by logging into your LINE account"),o.a.createElement("button",{ref:m,className:"liffLoginButton",onClick:function(){window.liff.isLoggedIn()||(console.log("loginClick -> window.liff.isLoggedIn()******",window.liff.isLoggedIn()),window.liff.login({redirectUri:"http://localhost:3000"}),console.log("Before login*******"))}},"Log in")),o.a.createElement("div",{className:"add-assistant-section"},o.a.createElement("p",{className:"market-subInfo"},"Use this QR code to add SKYRA to your LINE and wait for the messages!"),o.a.createElement("img",{className:"phone_pic",src:u.a}),o.a.createElement("img",{className:"qrcode",src:"/151tshrj.png"}),o.a.createElement("p",{className:"market-subInfo"},"You will get a message every morning at 10:00(JST)")),o.a.createElement("div",{className:"buttonGroup"},o.a.createElement(h,null)),o.a.createElement("div",{id:"hooter"},"\xa9 SKYRA 2020. All rights reserved."),o.a.createElement("div",{id:"shareTargetPickerMessage"}),o.a.createElement("div",{id:"accessTokenData",className:"hidden textLeft"},o.a.createElement("h2",null,"Access Token"),o.a.createElement("a",{href:"#"},"Close Access Token"),o.a.createElement("table",null,o.a.createElement("tr",null,o.a.createElement("th",null,"accessToken"),o.a.createElement("td",{id:"accessTokenField"})))),o.a.createElement("div",{id:"scanQr",className:"hidden textLeft"},o.a.createElement("h2",null,"QR Code reader"),o.a.createElement("a",{href:"#"},"Close QR Code Reader Result"),o.a.createElement("table",null,o.a.createElement("tr",null,o.a.createElement("th",null,"scanCode Result"),o.a.createElement("td",{id:"scanQrField"})))),o.a.createElement("div",{id:"profileInfo",className:"hidden textLeft"},o.a.createElement("h2",null,"Profile"),o.a.createElement("a",{href:"#"},"Close Profile"),o.a.createElement("div",{id:"profilePictureDiv"}),o.a.createElement("table",null,o.a.createElement("tr",null,o.a.createElement("th",null,"userId"),o.a.createElement("td",{id:"userIdProfileField"})),o.a.createElement("tr",null,o.a.createElement("th",null,"displayName"),o.a.createElement("td",{id:"displayNameField"})),o.a.createElement("tr",null,o.a.createElement("th",null,"statusMessage"),o.a.createElement("td",{id:"statusMessageField"}))))),o.a.createElement("div",{id:"liffIdErrorMessage",className:"hidden"},o.a.createElement("p",null,"You have not assigned any value for LIFF ID."),o.a.createElement("p",null,"If you are running the app using Node.js, please set the LIFF ID as an environment variable in your Heroku account follwing the below steps:"," "),o.a.createElement("code",{id:"code-block"},o.a.createElement("ol",null,o.a.createElement("li",null,"Go to `Dashboard` in your Heroku account."),o.a.createElement("li",null,"Click on the app you just created."),o.a.createElement("li",null,"Click on `Settings` and toggle `Reveal Config Vars`."),o.a.createElement("li",null,"Set `MY_LIFF_ID` as the key and the LIFF ID as the value."),o.a.createElement("li",null,"Your app should be up and running. Enter the URL of your app in a web browser."))),o.a.createElement("p",null,"If you are using any other platform, please add your LIFF ID in the"," ",o.a.createElement("code",null,"index.html")," file."),o.a.createElement("p",null,"For more information about how to add your LIFF ID, see"," ",o.a.createElement("a",{href:"https://developers.line.biz/en/reference/liff/#initialize-liff-app"},"Initializing the LIFF app"),".")),o.a.createElement("div",{id:"liffInitErrorMessage",className:"hidden"},o.a.createElement("p",null,"Something went wrong with LIFF initialization."),o.a.createElement("p",null,'LIFF initialization can fail if a user clicks "Cancel" on the "Grant permission" screen, or if an error occurs in the process of'," ",o.a.createElement("code",null,"liff.init()"),".")),o.a.createElement("div",{id:"nodeLiffIdErrorMessage",className:"hidden"},o.a.createElement("p",null,"Unable to receive the LIFF ID as an environment variable.")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.d8782be7.chunk.js.map